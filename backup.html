<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Alunos</title>
    <!-- IMPORTANDO SDKS DO FIREBASE (versão compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    
    <style>
        /* Seus estilos permanecem os mesmos */
    </style>
</head>
<body>
    <!-- Seu HTML permanece o mesmo -->
    
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC-MiWuaNFmuXJqAwd8BSO5Grebl3qhxP8",
            authDomain: "aprendendo-a9a8b.firebaseapp.com",
            projectId: "aprendendo-a9a8b",
            storageBucket: "aprendendo-a9a8b.firebasestorage.app",
            messagingSenderId: "1026606384841",
            appId: "1:1026606384841:web:6a81256940c13ee149ef18",
            measurementId: "G-46P5GW2BY3",
            databaseURL: "https://aprendendo-a9a8b-default-rtdb.firebaseio.com/" // Adicione esta linha
        };

        // Inicialize o Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        async function cadastrarAluno() {
            // Obter valores dos campos
            const nome = document.getElementById('nome').value;
            const idade = document.getElementById('idade').value;
            const nota = parseFloat(document.getElementById('nota').value);
            
            // Validar campos
            if (!nome || !idade || isNaN(nota)) {
                alert('Por favor, preencha todos os campos corretamente!');
                return;
            }
            
            // Determinar situação
            let situacao;
            if (nota >= 6) {
                situacao = 'Aprovado';
            } else if (nota >= 4) {
                situacao = 'Recuperação';
            } else {
                situacao = 'Reprovado';
            }
            
            // Adicionar à tabela
            const tabela = document.getElementById('corpo-tabela');
            const novaLinha = tabela.insertRow();
            
            novaLinha.insertCell(0).textContent = nome;
            novaLinha.insertCell(1).textContent = idade;
            novaLinha.insertCell(2).textContent = nota.toFixed(1);
            novaLinha.insertCell(3).textContent = situacao;
            
            // Salvar no Firebase
            try {
                const referencia = firebase.database().ref('escola/alunos/' + Date.now());
                await referencia.set({
                    nome: nome,
                    idade: idade,
                    nota: nota,
                    situacao: situacao,
                    dataCadastro: firebase.database.ServerValue.TIMESTAMP
                });
                alert("Dados salvos com sucesso no Firebase!");
            } catch (error) {
                console.error("Erro ao salvar no Firebase:", error);
                alert("Erro ao salvar os dados no Firebase.");
            }
            
            // Limpar campos
            document.getElementById('nome').value = '';
            document.getElementById('idade').value = '';
            document.getElementById('nota').value = '';
        }
    </script>
</body>
</html>
